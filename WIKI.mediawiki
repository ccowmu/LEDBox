= LEDBox =

LEDBox is the NeoPixel LED lighting system for the CCaWMU office. It drives a 300-pixel LED strip that can be controlled remotely through Matrix chat commands.

== How It Works ==

<pre>
┌──────────────┐   $led red    ┌──────────────────┐   poll 1s   ┌─────────────┐       ┌──────────────┐
│  Matrix Chat │ ────────────▶ │  Server (yakko)  │ ◀───────── │  LEDBox Pi  │ ────▶ │  300 NeoPixel │
│  $led / $rgb │               │  :8878           │ ─────────▶ │  (LEDbox)   │       │  LED Strip   │
└──────────────┘               └──────────────────┘             └─────────────┘       └──────────────┘
</pre>

# A user sends a command in Matrix chat (e.g. <code>$led red</code>, <code>$led rainbow</code>, <code>$led chase</code>)
# The chatbot POSTs the color/mode to the server at <code>yakko.cs.wmich.edu:8878</code>
# The LEDBox Pi polls the server every 1 second for the current state
# The Pi drives the NeoPixel strip with the requested color or animation

== Chat Commands ==

Control the LEDs from Matrix chat using the <code>$led</code> command:

* <code>$led #ff0000</code> — Set color to red (default mode: color)
* <code>$led #00ff22 chase</code> — Set color to green with chase animation
* <code>$led #0000ff rainbow</code> — Rainbow cycle
* <code>$led #ffffff random</code> — Random mode

== Animation Modes ==

{| class="wikitable"
! Mode !! Behavior
|-
| '''color''' || Wipes the solid color across the strip, then fades to black
|-
| '''chase''' || Theater-style chasing lights in the current color
|-
| '''rainbow''' || Full rainbow cycle across all 300 pixels
|-
| '''random''' || Randomly picks between rainbow, chase, and color
|}

== Hardware ==

{| class="wikitable"
! Component !! Details
|-
| '''Computer''' || Raspberry Pi 3 Model B+
|-
| '''Hostname''' || <code>LEDbox</code>
|-
| '''IP Address''' || <code>192.168.1.194</code>
|-
| '''LED Strip''' || 300x WS2812B (NeoPixel) — GRB color order
|-
| '''Data Pin''' || GPIO 18 (PWM)
|}

== Software ==

All source code lives in one repo: [https://github.com/ccowmu/LEDBox https://github.com/ccowmu/LEDBox]

=== Systemd Services ===

{| class="wikitable"
! Service !! What It Does
|-
| <code>ledbox.service</code> || Runs the controller as root. Starts on boot.
|-
| <code>ledbox-sync.timer</code> || Every 60s: pulls from GitHub, restarts if changed.
|}

== See Also ==

=== Door Bot (Office Lock) ===
* '''Wiki:''' [[Doorbot]]
* '''GitHub:''' [https://github.com/ccowmu/doorbot ccowmu/doorbot]

=== Office-IoT (Central Server) ===
* '''Wiki:''' [[Office-IoT]]
* '''GitHub:''' [https://github.com/ccowmu/Office-IoT ccowmu/Office-IoT]
